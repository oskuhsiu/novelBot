---
name: chaos_engine
description: 意外生成器 - 引入隨機意外事件，打破劇情的平順
---

# 意外生成器 (Chaos Engine)

## 功能概述

此 Skill 負責在劇情過於平順時引入「突發意外」，增加緊張感和不可預測性。它可以打破僵局、製造衝突、或者將主角推入更糟糕的處境。

## 觸發條件

1. **劇情太順利**：連續 2-3 個節拍沒有重大阻礙
2. **張力不足**：`beat_optimizer` 檢測到連續低張力
3. **主動呼叫**：需要製造轉折點時

## 意外類型

| 類型 | 說明 | 強度範圍 |
|------|------|----------|
| 環境突變 | 天災、停電、空間扭曲 | 中-高 |
| 第三方介入 | 新勢力出現、路人闖入 | 低-高 |
| 盟友背叛 | 內鬼、意外站錯邊 | 高 |
| 設備故障 | 武器損壞、能力反噬 | 中 |
| 信息錯誤 | 情報有誤、誤判形勢 | 中-高 |
| 個人危機 | 舊傷復發、心魔爆發 | 中-高 |
| 時間限制 | 新的 deadline 出現 | 中 |

## 輸入

1. 當前劇情狀態
2. 涉及的角色和場景
3. 期望的意外強度（低/中/高）

## 輸出

意外事件描述，包含：
- 事件內容
- 對當前劇情的影響
- 可能的發展方向

## 執行步驟

### Step 1: 評估當前形勢
```
讀取當前狀態：
- 主角處境：{{protagonist_situation}}
- 最近節拍張力：{{recent_tension_levels}}
- 已使用的意外類型：{{used_twist_types}}
- 待回收的伏筆：{{open_foreshadowing}}
```

### Step 2: 選擇意外類型
```
## 意外強度定義

【低強度 (1-3)】
- 製造小麻煩，但可以快速解決
- 例：設備暫時故障、小配角誤會

【中強度 (4-6)】
- 需要付出代價才能解決
- 例：計畫需要調整、某個資源損失

【高強度 (7-9)】
- 重大挫敗，短期內無法逆轉
- 例：盟友背叛、重要物品被毀

【毀滅性 (10)】
- 改變故事走向的重大轉折
- 例：主要角色死亡、目標喪失
- 慎用，每部作品僅 1-2 次

根據需求選擇：{{intensity_level}}
```

### Step 3: 生成意外事件
```
你是一位專精於劇情轉折的編劇。
請為當前場景設計一個 {{intensity}} 強度的意外事件：

【當前場景】：{{current_scene}}
【涉及角色】：{{characters}}
【已知威脅】：{{known_threats}}
【可用伏筆】：{{available_foreshadowing}}

## 設計要求

1. **合理性**：意外必須在世界觀內合理
2. **建立性**：最好能從已有設定中生長出來
3. **可發展**：意外應該開啟新的劇情可能，而非堵死

請提供 3 個候選方案：

【方案 A】：{{type}} 類型
- 事件描述：
- 立即後果：
- 長期影響：
- 可能的應對方式：

【方案 B】：...
【方案 C】：...
```

### Step 4: 評估連鎖影響
```
選定方案後，評估連鎖影響：

## 對角色的影響
- 主角：
- 相關配角：

## 對勢力的影響
- 緊張度變化：
- 可能觸發的派系反應：

## 對後續劇情的影響
- 需要調整的大綱節點：
- 新增的劇情可能：

## 需要更新的資料庫
- character_db：{{changes}}
- faction_registry：{{changes}}
- narrative_progress：{{changes}}
```

## 意外素材庫

### 環境類
```yaml
- type: "電力中斷"
  description: "整個區域突然陷入黑暗，備用電源只能維持基礎照明"
  consequences: ["視野受限", "安防系統暫時失效", "交通癱瘓"]

- type: "空間裂縫"
  description: "天空撕開一道口子，異界的氣息開始滲入"
  consequences: ["引來注意", "環境變異", "時間可能扭曲"]
```

### 人物類
```yaml
- type: "臥底暴露"
  description: "一直以為是盟友的人，其實在傳遞情報"
  consequences: ["信任危機", "先前計畫失效", "情感衝擊"]

- type: "仇家上門"
  description: "曾經放過的敵人帶著增援回來了"
  consequences: ["必須應戰", "之前的選擇被質疑"]
```

### 個人類
```yaml
- type: "舊傷復發"
  description: "之前的傷沒有完全恢復，在關鍵時刻惡化"
  consequences: ["能力下降", "需要選擇：繼續還是撤退"]

- type: "心魔爆發"
  description: "修煉時留下的隱患在壓力下爆發"
  consequences: ["失控風險", "需要隊友協助"]
```

## 使用時機

- **劇情平淡時**：自動或手動觸發
- **轉折點設計**：為結構性轉折服務
- **角色成長**：通過困境促進成長

## 與其他 Skill 的關聯

- **觸發者**：
  - `skill_beat_optimizer`（檢測低張力）
  - `workflow_maintenance`（定期評估）
- **影響**：
  - `skill_status_monitor`（更新角色狀態）
  - `skill_power_dynamic_updater`（調整勢力緊張度）

## 注意事項

1. **不要濫用**：太多意外會讓讀者感覺刻意
2. **種子原則**：最好的意外是從已有設定中生長
3. **後續跟進**：意外發生後，必須處理其後果
4. **平衡**：意外不應該總是針對主角
5. **類型多樣**：避免總是使用同一種意外類型
