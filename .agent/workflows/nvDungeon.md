---
description: 生成可探索的密境或副本結構
---

# /nvDungeon - 密境/副本生成

## 參數

| 參數 | 必填 | 說明 | 範例 |
|------|------|------|------|
| `proj` | ✅ | 專案名稱 | `proj=霓虹劍仙` |
| `name` | ✅ | 密境名稱 | `name=數據廢墟` |
| `type` | ❌ | 結構類型 | `type=linear/branching/hub/maze` |
| `level` | ❌ | 難度等級 | `level=1-10` |
| `floors` | ❌ | 樓層數量 | `floors=3` |
| `rooms` | ❌ | 房間數量 | `rooms=12` |

## 使用範例

```bash
# 基本生成
/nvDungeon proj=霓虹劍仙 name=數據廢墟

# 指定結構和難度
/nvDungeon proj=霓虹劍仙 name=古老伺服器 type=branching level=8

# 完整參數
/nvDungeon proj=霓虹劍仙 name=地下迷宮 type=maze level=6 floors=5 rooms=20
```

## 結構類型

| type | 說明 | 適用場景 |
|------|------|----------|
| `linear` | 線性推進，一條主路 | 教學關卡、劇情副本 |
| `branching` | 分支結構，多條路線 | 探索型副本 |
| `hub` | 中心輻射，核心+分支 | 競技場、據點 |
| `maze` | 迷宮式，複雜交錯 | 謎題副本 |

## 執行步驟

### Step 1: 讀取專案設定
// turbo
讀取 `novel_config.yaml` 確定世界觀風格。

### Step 2: 生成結構框架
調用 `dungeon_generator` Skill：

```yaml
structure:
  type: "branching"
  floors: 3
  rooms_per_floor: 4
  total_rooms: 12
```

### Step 3: 填充房間內容
根據世界觀生成：
- 敵人配置
- 陷阱設置
- 寶藏分布
- 謎題設計
- BOSS 房間

### Step 4: 生成地圖

```
╔═══════════════════════════════════════╗
║           數據廢墟 (3F)               ║
╠═══════════════════════════════════════╣
║                                       ║
║  F1: [入口] ─── [戰鬥室] ─┬─ [休息站]  ║
║                    │      │           ║
║                [謎題室] ──┘           ║
║                    │                  ║
║  F2:           [走廊] ─── [寶藏室]    ║
║                    │                  ║
║                [陷阱區] ─ [隱藏房]    ║
║                    │                  ║
║  F3:           [前廳] ─── [BOSS房]    ║
║                                       ║
╚═══════════════════════════════════════╝
```

### Step 5: 生成內容摘要

```yaml
dungeon_summary:
  name: "數據廢墟"
  hazard_level: 8
  estimated_chapters: 3-5
  
  enemies:
    - name: "數據殘魂"
      count: 12
      level: 7
    - name: "廢棄協議守護者"
      count: 1
      level: 10
      type: "BOSS"
      
  treasures:
    - "古老伺服器核心（傳說）"
    - "能量碎片 ×15"
    - "故障模組 ×8"
    
  puzzles:
    - "算法重組（解密謎題）"
    - "頻段校準（操作謎題）"
```

### Step 6: 寫入世界地圖
// turbo
更新 `world_atlas.yaml`：

```yaml
zones:
  - id: "ZONE_XXX"
    name: "數據廢墟"
    type: "Dungeon"
    hazard_level: 8
    internal_structure: {...}
```

### Step 7: 輸出報告

```
═══════════════════════════════════════════════════
  密境生成完成
═══════════════════════════════════════════════════
  名稱：數據廢墟
  類型：分支結構 (branching)
  難度：★★★★★★★★☆☆ (8/10)
───────────────────────────────────────────────────
  結構：
  ├─ 樓層：3
  ├─ 房間：12
  ├─ 戰鬥房：5
  ├─ 謎題房：2
  ├─ 寶藏房：2
  ├─ 休息房：1
  ├─ 隱藏房：1
  └─ BOSS房：1
───────────────────────────────────────────────────
  內容：
  ├─ 敵人種類：2
  ├─ 總敵人數：13
  ├─ 謎題數量：2
  └─ 寶藏數量：24 件
───────────────────────────────────────────────────
  BOSS：廢棄協議守護者 (Lv.10)
  ├─ 階段：3
  ├─ 弱點：核心暴露期
  └─ 掉落：古老伺服器核心
───────────────────────────────────────────────────
  已寫入：world_atlas.yaml
  預計章節：3-5 章
═══════════════════════════════════════════════════
```

## 輸出

密境資料存放於 `config/world_atlas.yaml` 的 `zones` 區塊。
